---
title: Electron实践之小试牛刀
date: 2020-10-28 12:44:00
updated: 2020-10-28 12:44:00
tags:
---

最近接触了游戏的业务，要开发一个类似游戏盒子的功能
# 桌面应用
纷繁复杂的应用程序可以分为三大类，Web应用、移动端应用、桌面应用，这里细说一下桌面应用
## 什么是桌面应用
桌面应用程序，又称为 GUI 程序（Graphical User Interface），但是和 GUI 程序也有一些区别。桌面应用程序 将 GUI 程序从GUI 具体为“桌面”，使冷冰冰的像块木头一样的电脑概念更具有 人性化，更生动和富有活力。我们电脑上使用的各种客户端程序都属于桌面应用程序，近年来WEB和移动端的兴起让桌面程序渐渐暗淡，但是在某些日常功能或者行业应用中桌面应用程序仍然是必不可少的。
## 开发方式
* 原生开发
直接将语言编译成可执行文件，直接调用**系统API**，完成UI绘制等。这类开发技术，有着较高的运行效率，但一般来说，开发速度较慢，技术要求较高
例如：C++ / MFC 开发Windows应用、 Objective-C 开发Mac应用

* 托管平台
一开始就有本地开发和UI开发。一次编译后，得到中间文件，通过平台或虚机完成二次加载编译或解释运行。运行效率低于原生编译，但平台优化后，其效率也是比较可观的。就开发速度方面，比原生编译技术要快一些。例如：
C# / .NET Framework、 Java / Swing

* WEB开发
使用**WEB**技术进行开发，利用浏览器引擎完成UI渲染，利用**Node.js**实现服务器端，JS编程并可以调用**系统API**，可以把它想像成一个套了一个客户端外壳的**WEB**应用。
在界面上，WEB的强大生态为UI带来了无限可能，并且开发、维护成本相对较低，有WEB开发经验的前端开发者很容易上手进行开发

# Electron
## 什么是Electron(What?)
官方解释：Electron 可以让你使用纯 JavaScript 调用丰富的原生 APIs 来创造桌面应用。你可以把它看作是专注于桌面应用而不是 web 服务器的，io.js 的一个变体
我的理解：为使用JavaScript构建桌面应用提供的环境
## 为什么使用Electron(Why)?
* 站在巨人肩膀上，拥有强大的Web技术生态支持，开发效率高，可扩展性强
* 跨平台性，一套代码可以支持不同的操作系统，甚至可以直接移植到web端、移动端
* 兼容性好，使用Chromium内核渲染，无需在考虑各类浏览器的兼容性。且使用Nodejs内置模块Request，不存在跨域问题
* 对于大前端们易于上手

## 有谁在用(Who)?
![](/images/1.png)

## 工作原理
![](/images/2.png)

* 主进程
在 Electron 里，运行 package.json 里 main 脚本的进程被称为主进程。在主进程运行的脚本可以以创建 web 页面的形式展示 GUI
* 渲染进程
由于 Electron 使用 Chromium 来展示页面，所以 Chromium 的多进程结构也被充分利用。每个 Electron 的页面都在运行着自己的进程，这样的进程我们称之为渲染进程

每个Electron应用都会有辅助进程存在，辅助进程就相当于Electron的一个单独渲染进程，但是你即使关闭所有标签页，浏览器依旧存在，这就相当于Electron的主线程，能够打开新的窗口或者关闭整个应用。那么主进程和辅助进程是如何进行通信呢？
在Electron应用中，GUI组件仅在主进程可用，在辅助进程中不可用。那如果想要在辅助进程中试用GUI组件，势必需要和主进程进行通信。ipc模块就是用来实现主进程和辅助进程之间的通信。在主进程中使用ipcMain模块进行对辅助进程的通信进行控制和处理。而在辅助进程中，则使用ipcRenderer模块，来向主进程发送消息或者接受主进程的回应

![](/images/3.png)

